// scrollbar styles
.__scrollbar {
	&::-webkit-scrollbar {
		width: 10px;
		height: 10px;
	}

	&::-webkit-scrollbar {
		background: transparent;
		border-radius: 10px;
	}

	&::-webkit-scrollbar-thumb {
		background: #66647d;
		border-radius: 10px;
	}

	&::-webkit-scrollbar-corner {
		background: transparent;
	}
}

// pattern editor wrapper. This will attempt to be at most 50% wide, and 100% high. Scrollbar on the left will always appear, but on the bottom only when too wide.
.patterneditor {
	height: 100%;
	width: max-content;
	max-width: 50%;
	background: black;
	overflow-y: scroll;
	overflow-x: auto;
	white-space: nowrap;

	float: left;
	border-top-right-radius: 8px;
	border-bottom-right-radius: 8px;

	font-family: 'Noto Sans', sans-serif;
	font-size: 11pt;

	.__scrollbar();

	// width of the first row
	@firstrow: 26px;
	@otherrows: 50px;
	@rowheight: 20px;
	@butwidth: 60px;
	@butheight: 23px;

	.__item {
		border-radius: 4px;
		display: inline-block;
	}

	// channel elements
	&> .patterneditor_channels {
		position: sticky;
		top: 0;

		&> div {
			.__item();
			border: 1px solid black;
			text-align: center;
			width: @otherrows;
			height: @rowheight;
			background: #3b3c46;
			color: white;
			border-top-left-radius: 0;
			border-top-right-radius: 0;

			&:first-child {
				width: @firstrow;
				border-bottom-left-radius: 0;
			}

			&.patterneditor_insert {
				cursor: pointer;
				transition: background-color .3s ease, background-image .25s ease-in-out;
				background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='%23fff' stroke-width='9' d='M50 10v80M10 50h80'/%3E%3C/svg%3E");
				background-size: 70%;
				background-position: center;
				background-repeat: no-repeat;

				&:hover {
					background-color: #494a5a;
					background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='%23fff' stroke-width='14' d='M50 10v80M10 50h80'/%3E%3C/svg%3E");
				}
			}
		}
	}

	// vertical row wrapper
	&> .patterneditor_rows {
		.__scrollbar();
		text-align: center;
		width: 100%;
		min-height: calc(100% - @rowheight - @butheight - 6px);

		&> div {
			display: block;
			height: @rowheight;
			width: max-content;
			margin: 1px 0;

			// both channel header and channel tracker elements
			&> div {
				.__item();
				margin: 1px;
				width: @otherrows;
				height: 100%;
				color: #d6d6d6;
				background: #28282b;
				cursor: pointer;
				transition: background-color .3s ease;

				// the first row is special, as it shows the song position
				&:first-child {
					width: @firstrow;
					color: #f5c6c6;
					background: #28282b;
					cursor: initial;

					border-top-left-radius: 0;
					border-bottom-left-radius: 0;
				}

				&:not(:first-child):hover {
					background: #474752;
				}

				// special case to make every other channel slightly different color
				&:nth-child(even) {
					background: #3a3636;

					&:hover {
						background: #5a4c4c;
					}
				}
			}

			// handling for selected columns and elements
			&.selected > div {
				background: #6f3f3f !important;
				color: #c9c6ce;

				&:not(:first-child):hover {
					background: #6e5454 !important;
				}

				&.selected {
					background: #6b4264 !important;

					&:hover {
						background: #6e566a !important;
					}
				}
			}
		}
	}

	// all the functional buttons in the pattern editor
	&> .patterneditor_buttons {
		position: sticky;
		bottom: 0;
		left: 0;
		text-align: center;
		color: #d6d6d6;
		font: 11.5pt "Noto Sans", sans-serif;
		pointer-events: none;

		&> div {
			pointer-events: initial;
			cursor: pointer;
			border: 3px solid black;
			border-bottom: none;
			display: inline-block;
			width: @butwidth;
			height: @butheight;
			background: #37373e;

			&:hover {
				background: #474752;
			}

			&:first-child {
				border-top-left-radius: 8px;
			}

			&:not(:first-child) {
				border-left: none;
			}

			&:last-child {
				border-top-right-radius: 8px;
			}
		}
	}
}
